{
    frankenphp
    order php_server before file_server
}

:{$PORT} {
    root * /app

    # WordPress permalinks support
    php_server {
        resolve_root_symlink
    }

    # Try files in order: exact file, directory, then WordPress index.php
    try_files {path} {path}/ /index.php?{query}

    # Handle PHP files
    @phpFiles path *.php
    php @phpFiles

    # Serve static files
    file_server
}
